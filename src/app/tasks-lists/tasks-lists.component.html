<section class="mx-auto row mt-5">
  <div class="col-md-4">
    <div>
      <h2>To do</h2>
      <button
        mat-button
        color="primary"
        (click)="sortTask('todo', 'date')"
        class="mb-2"
      >
        <mat-icon>sort</mat-icon>
        Sort by date
      </button>
      <button
        mat-button
        color="warn"
        (click)="sortTask('todo', 'priority')"
        class="mb-2"
      >
        <mat-icon>sort</mat-icon>
        Sort by priority
      </button>
      <div
        cdkDropList
        #todo="cdkDropList"
        [cdkDropListData]="tasks.todo"
        [cdkDropListConnectedTo]="[inprogress, done]"
        class="list mb-5"
        (cdkDropListDropped)="drop($event)"
      >
        <div
          class="list-item"
          *ngFor="let item of tasks.todo; let i = index"
          cdkDrag
        >
          <div>
            <span>{{ item.name }}</span>
            <span *ngIf="item.priority === 'medium'" class="priority">!</span>
            <span *ngIf="item.priority === 'high'" class="priority">!!!</span>
          </div>
          <div>
            <span (click)="edit(i, 'todo')">
              <mat-icon class="icon edit">edit</mat-icon>
            </span>
            <span (click)="remove(i, 'todo')">
              <mat-icon class="icon delete">delete</mat-icon>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div>
      <h2>In progress</h2>
      <button
        mat-button
        color="primary"
        (click)="sortTask('inprogress', 'date')"
        class="mb-2"
      >
        <mat-icon>sort</mat-icon>
        Sort by date
      </button>
      <button
        mat-button
        color="warn"
        (click)="sortTask('inprogress', 'priority')"
        class="mb-2"
      >
        <mat-icon>sort</mat-icon>
        Sort by priority
      </button>
      <div
        cdkDropList
        #inprogress="cdkDropList"
        [cdkDropListData]="tasks.inprogress"
        [cdkDropListConnectedTo]="[todo, done]"
        class="list mb-5"
        (cdkDropListDropped)="drop($event)"
      >
        <div
          class="list-item"
          *ngFor="let item of tasks.inprogress; let i = index"
          cdkDrag
        >
          <div>
            <span>{{ item.name }}</span>
            <span *ngIf="item.priority === 'medium'" class="priority">!</span>
            <span *ngIf="item.priority === 'high'" class="priority">!!!</span>
          </div>
          <div>
            <span (click)="edit(i, 'inprogress')">
              <mat-icon class="icon edit">edit</mat-icon>
            </span>
            <span (click)="remove(i, 'inprogress')">
              <mat-icon class="icon delete">delete</mat-icon>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div>
      <h2>Done</h2>
      <button
        mat-button
        color="primary"
        (click)="sortTask('done', 'date')"
        class="mb-2"
      >
        <mat-icon>sort</mat-icon>
        Sort by date
      </button>
      <button
        mat-button
        color="warn"
        (click)="sortTask('done', 'priority')"
        class="mb-2"
      >
        <mat-icon>sort</mat-icon>
        Sort by priority
      </button>
      <div
        cdkDropList
        #done="cdkDropList"
        [cdkDropListData]="tasks.done"
        [cdkDropListConnectedTo]="[todo, inprogress]"
        class="list done mb-5"
        (cdkDropListDropped)="drop($event)"
      >
        <div
          class="list-item"
          *ngFor="let item of tasks.done; let i = index"
          cdkDrag
        >
          <div>
            <span>{{ item.name }}</span>
          </div>
          <div>
            <span (click)="edit(i, 'done')">
              <mat-icon class="icon edit">edit</mat-icon>
            </span>
            <span (click)="remove(i, 'done')">
              <mat-icon class="icon delete">delete</mat-icon>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
